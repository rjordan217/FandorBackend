{"version":3,"sources":["webpack:///webpack/bootstrap 8c29b770515e3c1aeb20","webpack:///./frontend_lite/requestFunctions.js","webpack:///./frontend_lite/tagGeneratorFunctions.js","webpack:///./frontend_lite/displayForm.js","webpack:///./frontend_lite/responseFunctions.js","webpack:///./frontend_lite/launchApp.js","webpack:///./frontend_lite/domCBs.js","webpack:///./frontend_lite/attachListeners.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,aAAa,SAAS,qCAAqC;AAC3D;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;ACrEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;ACjEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,6BAA6B,MAAM;AACnC;AACA;;;;;;;ACTA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8c29b770515e3c1aeb20","var resFuncs = require('./responseFunctions.js');\n\nmodule.exports = {\n  createUser: function(userData) {\n    $.ajax({\n      method: 'POST',\n      data: userData,\n      url: '/api/user',\n      success: resFuncs.setCurrentUser\n    })\n  },\n  fetchCurrentUser: function() {\n    $.ajax({\n      method: 'GET',\n      url: '/api/user',\n      success: resFuncs.setCurrentUser\n    });\n  },\n  deleteUserAccount: function() {\n    $.ajax({\n      method: 'DELETE',\n      url: '/api/user',\n      success: resFuncs.setCurrentUser\n    });\n  },\n  login: function(userData) {\n    $.ajax({\n      method: 'POST',\n      data: userData,\n      url: '/api/session',\n      success: resFuncs.setCurrentUser\n    });\n  },\n  logout: function() {\n    $.ajax({\n      method: 'DELETE',\n      url: '/api/session',\n      success: resFuncs.setCurrentUser\n    });\n  },\n  fetchFilms: function() {\n    $.ajax({\n      method: 'GET',\n      url: '/api/films',\n      success: resFuncs.displayFilms\n    })\n  },\n  fetchFilmByURL: function(url_slug) {\n    $.ajax({\n      method: 'GET',\n      url: '/api/films/' + url_slug,\n      success: resFuncs.displayFilmDetail\n    })\n  },\n  createFilmRating: function(filmId, ratingValue) {\n    $.ajax({\n      method: 'POST',\n      url: '/api/ratings',\n      data: {rating: {film_id: filmId, value: ratingValue}},\n      success: resFuncs.handleRating\n    })\n  },\n  deleteFilmRating: function(ratingId) {\n    $.ajax({\n      method: 'DELETE',\n      url: '/api/ratings/' + ratingId,\n      success: resFuncs.handleRating\n    })\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/requestFunctions.js\n// module id = 0\n// module chunks = 0","var displayForm = require('./displayForm.js');\n\nfunction errors(errMsgArray) {\n  if(errMsgArray) {\n    return errMsgArray.map(function(errMsg) {\n      return $('<p class=\"error-msg\">Error: ' + errMsg + '</p>')\n    });\n  } else {\n    return [];\n  }\n}\n\nvar tagGeneratorFunctions = {\n  film: function(data,isDetail) {\n    var $film = $('<div class=\"film\"></div>'),\n        $content = [$('<h3>' + data[\"title\"] + ' (' + data[\"year\"] + ')' + '</h3>')];\n\n    if(isDetail) {\n      $content.push($('<p>' + data[\"description\"] + '</p><p>Average Rating: ' +\n                data[\"average_rating\"] + '</p>'));\n    }\n    $film.data('url_slug', data['url_slug']);\n    $film.data('film_id',data['id']);\n    $film.append($content);\n    if(isDetail) displayForm($film, 'rating');\n    return $film;\n  },\n  user: function(data) {\n    var $user = $('<div class=\"user\"></div>'),\n        $content,\n        $login,\n        $register,\n        $logout;\n    if(data['username']) {\n      $logout = $('<button id=\"logout\">Logout</button>');\n      $content = [$('<p>' + data['username'] + '</p>'), $logout];\n    } else {\n      $login = $('<button>Login</button>');\n      $login.on('click', function() {\n        $user.empty();\n        displayForm($user,'login');\n      });\n      $register = $('<button>Register</button>');\n      $register.on('click', function() {\n        $user.empty();\n        displayForm($user,'register');\n      });\n      $content = [$login, $register];\n    }\n    $user.append($content);\n    $user.append(errors(data[\"errors\"]));\n    return $user;\n  },\n  rating: function(hasBeenRated, ratingVal) {\n    var $rating = $('<p class=\"rating\"></p>');\n    if(hasBeenRated) {\n      $rating.html(ratingVal)\n    } else {\n      displayForm($rating,'rating');\n    }\n    return $rating;\n  },\n  errors: errors\n}\n\nmodule.exports = tagGeneratorFunctions;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/tagGeneratorFunctions.js\n// module id = 1\n// module chunks = 0","var runCBs = require('./domCBs').runCBs;\n\nmodule.exports = function($parent,type) {\n  var $content = [],\n      $button;\n  switch (type) {\n    case 'login':\n      $content.push($('<label>Username: <input name=\"username\" type=\"text\"/></label>'));\n      $content.push($('<label>Password: <input name=\"password\" type=\"password\" /></label>'));\n      $button = $('<button id=\"login\">Log In</button>');\n      break;\n    case 'register':\n      $content.push($('<label>Username: <input name=\"username\" type=\"text\"/></label>'));\n      $content.push($('<label>Password: <input name=\"password\" type=\"password\" /></label>'));\n      $button = $('<button id=\"register\">Register</button>');\n      break;\n    case 'rating':\n      $content.push($('<label class=\"rating\">Rating: <input type=\"number\"/></label>'));\n      $button = $('<button id=\"rate\" class=\"rating\">Rate Film</button>');\n      break;\n  }\n  $parent.append($content);\n  $parent.append($button);\n  runCBs();\n  return $parent;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/displayForm.js\n// module id = 2\n// module chunks = 0","var genTags = require('./tagGeneratorFunctions.js'),\n    runCBs = require('./domCBs.js').runCBs;\n\nmodule.exports = {\n  setCurrentUser: function(data) {\n    var $user = $('.user-container'),\n        $update = genTags.user(data);\n    if(!$user.length) {\n      $user = $('<div class=\"user-container\"></div>');\n      $('#root').prepend($user);\n    }\n    $user.html($update);\n    runCBs();\n  },\n  displayFilms: function(films) {\n    var $films = $('.films');\n    if(!$films.length) {\n      $films = $('<div class=\"films\"></div>');\n      $('#root').append($films);\n    }\n    $films.html(films['films'].map(function(filmData){\n      return genTags.film(filmData, false);\n    }))\n    $films.append(genTags.errors(films['errors']));\n    runCBs();\n  },\n  displayFilmDetail: function(film) {\n    var $film = genTags.film(film, true),\n        $errs = genTags.errors(film['errors']),\n        $hook = $('.film-detail');\n\n    if(!$hook.length) {\n      $hook = $('<div class=\"film-detail\"></div>');\n      $hook.data('film_id', film['id']);\n      $('#root').append($hook);\n    }\n    $hook.html($film);\n    $hook.append($errs);\n    runCBs();\n  },\n  handleRating: function(rating) {\n    var $parent = $('.film-detail .film');\n    $parent.find('.rating').remove();\n\n    var $errs = genTags.errors(rating['errors']),\n        $rating;\n\n    $rating = ($errs.length ? genTags.rating(false) : genTags.rating(true,rating['value']));\n    $parent.append($rating);\n    $parent.append($errs);\n    runCBs();\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/responseFunctions.js\n// module id = 3\n// module chunks = 0","var reqFuncs = require('./requestFunctions.js'),\n    tagGeneratorFunctions = require('./tagGeneratorFunctions.js'),\n    addCB = require('./domCBs').addCB;\n\naddCB(require('./attachListeners'));\nreqFuncs.fetchCurrentUser();\nreqFuncs.fetchFilms();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/launchApp.js\n// module id = 4\n// module chunks = 0","var cbs = [];\n\nmodule.exports = {\n  addCB: function(cb) {\n    cbs.push(cb);\n  },\n  runCBs: function() {\n    cbs.forEach(function(cb){cb();})\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/domCBs.js\n// module id = 5\n// module chunks = 0","var reqFuncs = require('./requestFunctions.js');\n\nfunction processData(type, $parent) {\n  var $toExtract = $parent.find('input'),\n      data = {};\n\n  data[type] = {};\n  $toPlay = $toExtract;\n  $toExtract.each(function(idx,el) {\n    data[type][el.name] = el.value;\n  });\n\n  return data;\n}\n\nfunction attachButtonCBs($button) {\n  var $parent = $button.parent(),\n      cb;\n  switch ($button.attr('id')) {\n    case 'login':\n      cb = function() {\n        var data = processData('user',$parent);\n        if(data) reqFuncs.login(data);\n      };\n      break;\n    case 'register':\n      cb = function() {\n        var data = processData('user',$parent);\n        if(data) reqFuncs.createUser(data);\n      };\n      break;\n    case 'rate':\n      cb = function() {\n        var ratingVal = $parent.find('input').val(),\n            filmId = $parent.data('film_id');\n        if(ratingVal && filmId) reqFuncs.createFilmRating(filmId,ratingVal);\n      };\n      break;\n    case 'logout':\n      cb = reqFuncs.logout;\n      break;\n    default:\n      return;\n  }\n  $button.on('click',cb);\n}\n\nmodule.exports = function() {\n  $('button').each(function(idx,el) {\n    attachButtonCBs($(el));\n  });\n  $('.films .film').each(function(idx,el) {\n    var $el = $(el);\n    $el.on('click', function() {\n      reqFuncs.fetchFilmByURL($el.data('url_slug'));\n    });\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend_lite/attachListeners.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}